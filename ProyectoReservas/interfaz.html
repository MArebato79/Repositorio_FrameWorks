<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Gestor de Reservas de Aulas</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 30px; background-color: #f6f6f6; }
        h1, h2 { color: #333; }
        button { margin-top: 5px; padding: 5px 10px; cursor: pointer; }
        input, select { margin: 3px; padding: 5px; }
        section { background: white; padding: 15px; margin-bottom: 20px; border-radius: 8px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
        pre { background: #eee; padding: 10px; border-radius: 5px; }
    </style>
</head>
<body>

<h1>API de Reservas de Aulas</h1>

<section>
    <h2>ðŸ“˜ Aulas</h2>
    <button onclick="getAulas()">Ver todas las aulas</button><br>
    <input id="nombreAula" placeholder="Nombre">
    <input id="capacidadAula" type="number" placeholder="Capacidad">
    <label><input id="ordenadoresAula" type="checkbox"> Aula de ordenadores</label>
    <input id="numOrdenadoresAula" type="number" placeholder="NÂº ordenadores">
    <button onclick="crearAula()">Crear Aula</button>
</section>

<section>
    <h2>ðŸ•’ Horarios</h2>
    <button onclick="getHorarios()">Ver todos los horarios</button><br>
    <input id="diaSemana" type="number" placeholder="DÃ­a semana (1-7)">
    <input id="sesionDia" type="number" placeholder="SesiÃ³n dÃ­a">
    <input id="horaInicio" type="time">
    <input id="horaFin" type="time">
    <button onclick="crearHorario()">Crear Horario</button>
</section>

<section>
    <h2>ðŸ“… Reservas</h2>
    <button onclick="getReservas()">Ver todas las reservas</button><br>
    <input id="fechaReserva" type="date">
    <input id="motivoReserva" placeholder="Motivo">
    <input id="asistentesReserva" type="number" placeholder="Asistentes">
    <input id="idAulaReserva" type="number" placeholder="ID Aula">
    <input id="idHorarioReserva" type="number" placeholder="ID Horario">
    <button onclick="crearReserva()">Crear Reserva</button>
</section>

<section>
    <h2>ðŸ§¾ Resultado</h2>
    <pre id="output"></pre>
</section>

<script>
    const API = 'http://localhost:8080';

    function mostrar(data) {
        document.getElementById('output').textContent = JSON.stringify(data, null, 2);
    }

    async function getAulas() {
        const res = await fetch(`${API}/aulas`);
        mostrar(await res.json());
    }

    async function crearAula() {
        const aula = {
            nombre: document.getElementById('nombreAula').value,
            capacidad: +document.getElementById('capacidadAula').value,
            esAulaDeOrdenadores: document.getElementById('ordenadoresAula').checked,
            numeroOrdenadores: +document.getElementById('numOrdenadoresAula').value
        };
        const res = await fetch(`${API}/aulas`, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(aula) });
        mostrar(await res.json());
    }

    async function getHorarios() {
        const res = await fetch(`${API}/horarios`);
        mostrar(await res.json());
    }

    async function crearHorario() {
        const horario = {
            diaSemana: +document.getElementById('diaSemana').value,
            sesionDia: +document.getElementById('sesionDia').value,
            horaInicio: document.getElementById('horaInicio').value,
            horaFin: document.getElementById('horaFin').value
        };
        const res = await fetch(`${API}/horarios`, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(horario) });
        mostrar(await res.json());
    }

    async function getReservas() {
        const res = await fetch(`${API}/reservas`);
        mostrar(await res.json());
    }

    async function crearReserva() {
        const reserva = {
            fecha: document.getElementById('fechaReserva').value,
            motivo: document.getElementById('motivoReserva').value,
            numeroAsistentes: +document.getElementById('asistentesReserva').value,
            aula: { id: +document.getElementById('idAulaReserva').value },
            horario: { id: +document.getElementById('idHorarioReserva').value }
        };
        const res = await fetch(`${API}/reservas`, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(reserva) });
        mostrar(await res.json());
    }
</script>
</body>
</html>
